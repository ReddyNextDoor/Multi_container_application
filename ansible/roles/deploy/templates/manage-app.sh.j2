#!/bin/bash

# {{ app_name | title }} Application Management Script
# Usage: ./manage-app.sh [start|stop|restart|status|logs|update]

APP_DIR="{{ app_directory }}"
COMPOSE_FILE="$APP_DIR/docker-compose.yml"

cd "$APP_DIR" || exit 1

case "$1" in
    start)
        echo "Starting {{ app_name }} application..."
        docker-compose -f "$COMPOSE_FILE" up -d
        ;;
    stop)
        echo "Stopping {{ app_name }} application..."
        docker-compose -f "$COMPOSE_FILE" down
        ;;
    restart)
        echo "Restarting {{ app_name }} application..."
        docker-compose -f "$COMPOSE_FILE" down
        docker-compose -f "$COMPOSE_FILE" up -d
        ;;
    status)
        echo "{{ app_name | title }} application status:"
        docker-compose -f "$COMPOSE_FILE" ps
        ;;
    logs)
        echo "{{ app_name | title }} application logs:"
        docker-compose -f "$COMPOSE_FILE" logs -f
        ;;
    update)
        echo "Updating {{ app_name }} application..."
        docker-compose -f "$COMPOSE_FILE" pull
        docker-compose -f "$COMPOSE_FILE" down
        docker-compose -f "$COMPOSE_FILE" up -d
        ;;
    *)
        echo "Usage: $0 {start|stop|restart|status|logs|update}"
        exit 1
        ;;
esac